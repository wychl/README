* emacs 笔记

** 中文输入


*** 首先下载emacs的ibus插件，ibus-el 

我使用的是ibus-el-0.3.1 

下载地址 https://launchpad.net/ibus.el 

***下载后解压，cp至你的emacs插件目录 
  
中间ibus的demo进程需要使用python-xlib，sudo 安装之

$sudo apt-get install python-xlib
  
*** 然后我们修改.emacs文件

```
;;set ibus-el
(add-to-list 'load-path "~/.emacs.d/ibus-el-0.3.1")
(require 'ibus)
(add-hook 'after-init-hook 'ibus-mode-on)
```

- 切换输入法

C-x Return C-\，选择Chinese-PY就可以激活输入法，然后使用C-\快捷键来在英语、中文之间切换。

** 编辑
*** C+\ 输入法切换

*** 移动 
| 命令    | 描述     |
| C-c C-n | 下个标题 |
| C-c C-p | 上 个标 题 |
| C-c C-f | 下个 同级标 题 |
| C-c C-b | 上个 同级 标题 |
| C-c C-u | 回到 上 层标题 |


*** 结构编辑
| 命 令                 | 描述                                                   |
| M-RET                 | 插入一个同级标题。如果光标在文本列表中，创建一个新的项 |
| M-S-RET               | 插入一个和当前标题同级的 TODO 项                       |
| TAB（新的空的条目中） | 如果新的条目中还没有文字，TAB 会调整到合适的级别。     |
| M-LEFT/RIGHT          | 将当前的标题提升/降低一个等级。                        |
| M-S-LEFT/RIGHT        | 将当前子提升/降低一个等级。                            |
| M-S-UP/DOWN           | 将子树上/下移（和前/后个子树交换）。                   |
| C-c C-w               | 将条目或区域传送到另一个文件中                         |
| C-x n s/w             | 将缓冲区视图局限到当前子树中/再次放宽视图              |


*** 文本列表
- 无序列表项以‘-’、‘+’或者‘*‘开头
- 有序列表项以‘1.’、‘1)’或者开头
- 描述列表用‘::’将项和描述分开

| 命令           | 描述                                                                                                 |
| TAB            | 折叠项                                                                                               |
| M-RET          | 在当前级别插入一个项，有前缀时是强制新建一个标题                                                     |
| M-S-RET        | 插入一个带有复先框的项                                                                               |
| M-S-UP/DOWN    | 将当前项和它的子项向上/下移动（和相同的缩进的前/后一个项交换位置）。如果列表是有序的，数字会自动改变 |
| M-LEFT/M-RIGHT | 提升/降低项的缩进，不包含子项                                                                        |
| M-S-LEFT/RIGHT | 提升/降低项的缩进，包含子项                                                                          |
| C-c C-c        | 如果项中有复先框，就触发改变其状态。并且自动保持本项的符号与缩进在列表中的一致性                     |
| C-c -          | 循环改变将当前列表的项标志符号                                                                       |

*** 脚注
脚注就是以脚注定义符号开头的一段话，脚注定义符号是将脚注名称放在一个方括号里形成的，要求放在第0列，不能有缩进。而引用就是在正文中将脚注名称用方括号括起来。

| 命令      | 描述                                                                                                                                                                                   |
| C-c C-x f | 这是一个移动命令。当光标处理引用处时，跳转到它的定义；当光标处理定义处时，跳转到第一个引用处。其他情况下，新建一个脚注。当有前缀时，会提供一个菜单供选择操作，其中包括重新给脚注编号。 |
| C-c C-c   | 在定义和引用之间跳转                                                                                                                                                                                       |


** 表格

| 命令         | 描述                                                                                                   |
| C-c C-c      | 调整表格，不移动光标                                                                                   |
| TAB          | 调整表格，将光标移到下一个区域，必要时新建一行                                                         |
| S-TAB        | 调整表格，将光标移到上一个区域                                                                         |
| RET          | 调整表格，将光标移到下一行，必要时会新建一行                                                           |
| M-LEFT/RIGHT | 左/右移当前列                                                                                          |
| M-S-LEFT     | 删除当前行                                                                                             |
| M-S-RIGHT    | 在光标位置左边添加一列                                                                                 |
| M-UP/DOWN    | 上/下移当前行                                                                                          |
| M-S-UP       | 删除当前行                                                                                             |
| M-S-DOWN     | 在当前行上面添加一行。如果有前缀，则在下面添加一行                                                     |
| C-c -        | 在当前行下面添加一个水平线。如果带前缀，则在上面添加一行水平线                                         |
| C-c RET      | 在当前行下面添加一个水平线。并将光标移动到下一行                                                       |
| C-c ^        | 将表排序。当前位置所在的列作为排序的依据。排序在距当前位置最近的两个水平线之间的行（或者整个表）中进行 |

                                                               |
** 待办事项
当标题以 TODO 开关时它就成为了一个 TODO 项
#+BEGIN_SRC 
***TODO Write letter to Sam Fortune
#+END_SRC

| 命 令        | 描述                                                                                                                                                                         |
| C-c C-t      | 将当前项的状态在（unmarked）->TODO->DONE 之间循环切换，同样的切换也可以在时间轴（timeline） 和议程（ agenda） 的缓冲区（buffer）中用 t 键“远程”进行。（见 2.6 节[稀疏树]） |
| S-RIGHT/LEFT | 选择下一个/上一个 TODO 状态，与上面的循环方式相同。                                                                                                                          |
| C-c / t      | 在稀疏树中显示 TODO 项。将 buffer 折叠，但是会显示 TODO 项和它们所在的层次的标题。                                                                                           |
| C-c a t      | 显示全局 TODO 列表。从所有的议程文件中收集 TODO 项到一个缓冲区中。详见 10.3.2 节。                                                                                           |
| S-M-RET      | 在当前项下插入一个新的 TODO 项。

                                                                                                                                                                             |
*** 优 先级 
#+BEGIN_SRC
*** TODO [#A] Write letter to Sam Fortune
#+END_SRC
Org模式支持三个优先级别：’A‘、’B‘和’C‘。’A‘是最高级别，如不指定，’B‘是默认的。优先级只在议程中有用。

| 命令   | 描述                                                                          |
| C-c ,  | 设置当前标题的优先级。按’‘’‘’‘选择一个级别，或者SPC删除标记（cookie）。 |
| S-Down | 增加/减少当前标题的优先级。
                                                                              |
*** 任务细分 
    很多时候将一个大的任务分成几个的易于完成的小任务是明智的。
你可以通过在TODO项目下新建一个大纲树，并在子树上标记子任务来实现这个功能。为了能对已经完成的任务有个大致的了解，你可以在标题的任何地方插入‘[/]’或者‘[%]’。当每个子任务的状态变化时，或者当你在标记上按 C-c C-c时，这些标记状态也会随之更新。例如：

#+BEGIN_SRC
* Organize Party [33%]
** TODO Call people [1/2]
*** TODO Peter
*** DONE Sarah
** TODO Buy food
** DONE Talk to neighbor
#+END_SRC

*** 复选框
当纯文本中的项以‘[]’开头时，就会变成一个复选框。复选框不会包含在全局 TODO 列表中，所以它们很适合地将一个任务划分成几个简单的步骤
#+BEGIN_SRC
* TODO Organize party [1/3]
  - [-] call people [1/2]
    - [ ] Peter
    - [X] Sarah
  - [X] order food
  - [ ] think about what music to play
#+END_SRC
复选框是分层工作的。所以如果一个复选框项目如果还有子复选框，触发子复选框将会使该复选框变化以反映出一个、多个还是没有子复选框被选中。

| 命令    | 描述                                                     |
| C-c C-c | 触发复选框的状态或者（加上前缀）触发复选框的的存在状态。 |
| M-S-RET | 增加一个带有复选框的项。这只在光标处于纯文本列表项（见 2.7 节）中才起使用。
                                                         |
** 表签
标签具有大纲树的继承结构。如果一个标题具有某个标签，它的所有子标题也会继承这个标签。

#+BEGIN_SRC
* Meeting with the French group     :work:
** Summary by Frank                 :boss:notes:
*** TODO Prepare slides for him     :action:
#+END_SRC


** 快捷键

- 剪切: C-w
- 复制: M-w
- 粘贴: C-y

- 上一行: C-p
- 下一行: C-n
- 左移一个字符: C-b
- 右移一个字符: C-f
- 行首: C-a
- 行尾: C-e

- 文章开头: M-S-,
- 文章结尾: M-S-.

- 向上搜索: C-r
- 向下搜索: C-s
- 替换：M-S-5

- 撤销: C-x u
- 保存: C-x s
- 保存，不提示: C-x C-s

- 全选: C-x h
- 退出: C-x C-c

- 取消命令: C-g

- 切分成两个窗口: C-x 2
- 关闭其他窗口: C-x 1
- 切换窗口: C-x o

- 剪切光标到行尾: C-k
- 删除下一个字符: C-d

- 显示所有buffer：C-mouse
- 关闭当前buffer：C-x k


